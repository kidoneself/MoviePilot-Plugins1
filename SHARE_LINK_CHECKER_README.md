# åˆ†äº«é“¾æ¥æ£€æŸ¥å™¨ - å¿«é€Ÿå¼€å§‹

## ğŸ¯ åŠŸèƒ½è¯´æ˜

æ–°å¢äº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æœåŠ¡ï¼Œç”¨äºè‡ªåŠ¨æ£€æŸ¥å“ªäº›èµ„æºè¿˜æ²¡æœ‰ç”Ÿæˆåˆ†äº«é“¾æ¥ã€‚

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. é…ç½®ï¼ˆå·²æ·»åŠ åˆ° config.yamlï¼‰

```yaml
share_link_checker:
  enabled: true              # å¯ç”¨æ£€æŸ¥å™¨
  check_interval_hours: 24   # æ¯24å°æ—¶æ£€æŸ¥ä¸€æ¬¡
```

é…ç½®è¯´æ˜ï¼š
- `enabled`: æ˜¯å¦å¯ç”¨æ£€æŸ¥å™¨
- `check_interval_hours`: æ£€æŸ¥é—´éš”
  - `24`: æ¯å¤©9ç‚¹æ£€æŸ¥ï¼ˆæ¨èï¼‰
  - `12`: æ¯å¤©9ç‚¹å’Œ21ç‚¹æ£€æŸ¥
  - `8`: æ¯å¤©æ£€æŸ¥3æ¬¡
  - `6`: æ¯6å°æ—¶æ£€æŸ¥ä¸€æ¬¡

### 2. å¯åŠ¨æœåŠ¡

```bash
# é‡å¯åç«¯æœåŠ¡å³å¯
cd /Users/lizhiqiang/coding-my/file-link-monitor
python -m backend.main
```

çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—è¯´æ˜å¯åŠ¨æˆåŠŸï¼š
```
âœ… åˆ†äº«é“¾æ¥æ£€æŸ¥å™¨å·²å¯åŠ¨ (é—´éš”: 24å°æ—¶)
```

### 3. æ‰‹åŠ¨è§¦å‘æ£€æŸ¥

**æ–¹æ³•1: ä½¿ç”¨curl**
```bash
# ç«‹å³æ£€æŸ¥å¹¶å‘é€å¾®ä¿¡é€šçŸ¥
curl -X POST http://localhost:8080/api/check-missing-links

# åªæ£€æŸ¥ï¼Œä¸å‘é€é€šçŸ¥
curl -X POST "http://localhost:8080/api/check-missing-links?send_notification=false"
```

**æ–¹æ³•2: ä½¿ç”¨æµè§ˆå™¨**
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· Console
- è¾“å…¥å¹¶æ‰§è¡Œï¼š
```javascript
fetch('/api/check-missing-links', {method: 'POST'})
  .then(r => r.json())
  .then(console.log)
```

### 4. æŸ¥è¯¢ç¼ºå¤±é“¾æ¥

```bash
# æŸ¥è¯¢ç™¾åº¦ç½‘ç›˜ç¼ºå¤±é“¾æ¥
curl http://localhost:8080/api/missing-links/baidu

# æŸ¥è¯¢å¤¸å…‹ç½‘ç›˜ç¼ºå¤±é“¾æ¥
curl http://localhost:8080/api/missing-links/quark

# æŸ¥è¯¢è¿…é›·ç½‘ç›˜ç¼ºå¤±é“¾æ¥
curl http://localhost:8080/api/missing-links/xunlei

# æŸ¥è¯¢ä¸‰ä¸ªç½‘ç›˜éƒ½æ²¡æœ‰çš„èµ„æº
curl http://localhost:8080/api/missing-links/all
```

### 5. æ‰¹é‡ç”Ÿæˆç¼ºå¤±é“¾æ¥

æŸ¥åˆ°ç¼ºå¤±é“¾æ¥åï¼Œå¯ä»¥æ‰¹é‡ç”Ÿæˆï¼š

```bash
# ç”Ÿæˆæ‰€æœ‰ç¼ºå¤±çš„ç™¾åº¦ç½‘ç›˜é“¾æ¥
curl -X POST http://localhost:8080/api/generate-link \
  -H "Content-Type: application/json" \
  -d '{"pan_type": "baidu"}'

# ç”Ÿæˆæ‰€æœ‰ç¼ºå¤±çš„å¤¸å…‹ç½‘ç›˜é“¾æ¥
curl -X POST http://localhost:8080/api/generate-link \
  -H "Content-Type: application/json" \
  -d '{"pan_type": "quark"}'

# ç”Ÿæˆæ‰€æœ‰ç¼ºå¤±çš„è¿…é›·ç½‘ç›˜é“¾æ¥
curl -X POST http://localhost:8080/api/generate-link \
  -H "Content-Type: application/json" \
  -d '{"pan_type": "xunlei"}'
```

## ğŸ“Š æ£€æŸ¥æŠ¥å‘Šç¤ºä¾‹

ç³»ç»Ÿä¼šé€šè¿‡ä¼ä¸šå¾®ä¿¡å‘é€ç±»ä¼¼è¿™æ ·çš„æŠ¥å‘Šï¼š

```
ğŸ”— åˆ†äº«é“¾æ¥æ£€æŸ¥æŠ¥å‘Š

ğŸ“Š èµ„æºæ€»æ•°: 150ä¸ª

ğŸ“‰ ç¼ºå¤±é“¾æ¥ç»Ÿè®¡:
  ç™¾åº¦ç½‘ç›˜: 25ä¸ª
  å¤¸å…‹ç½‘ç›˜: 18ä¸ª
  è¿…é›·ç½‘ç›˜: 32ä¸ª
  å…¨éƒ¨ç¼ºå¤±: 10ä¸ª

âš ï¸ ä»¥ä¸‹èµ„æºå°šæœªç”Ÿæˆä»»ä½•åˆ†äº«é“¾æ¥:

ã€ç”µè§†å‰§/å›½äº§å‰§é›†ã€‘
ğŸ”„ åŠ æ²¹ï¼Œä½ æ˜¯æœ€æ£’çš„ (2019)
âœ… åº†ä½™å¹´ (2019)

ã€ç”µå½±/æ¬§ç¾ç”µå½±ã€‘
ğŸ”„ å¤ä»‡è€…è”ç›Ÿ4 (2019)

â° æ£€æŸ¥æ—¶é—´: 2025-12-29 09:00

ğŸ’¡ æç¤º: å¯é€šè¿‡APIæ‰‹åŠ¨ç”Ÿæˆç¼ºå¤±çš„é“¾æ¥
```

## ğŸ“¦ æ–°å¢æ–‡ä»¶

```
backend/
  â””â”€â”€ services/
      â””â”€â”€ share_link_checker.py    # æ£€æŸ¥å™¨æ ¸å¿ƒä»£ç 

docs/
  â””â”€â”€ SHARE_LINK_CHECKER_GUIDE.md  # è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
```

## ğŸ”§ æ–°å¢APIç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/check-missing-links` | POST | æ‰‹åŠ¨è§¦å‘æ£€æŸ¥ |
| `/api/missing-links/{pan_type}` | GET | æŸ¥è¯¢ç¼ºå¤±é“¾æ¥åˆ—è¡¨ |

## ğŸ“– è¯¦ç»†æ–‡æ¡£

å®Œæ•´ä½¿ç”¨æŒ‡å—è¯·æŸ¥çœ‹ï¼š[docs/SHARE_LINK_CHECKER_GUIDE.md](./docs/SHARE_LINK_CHECKER_GUIDE.md)

## ğŸ¯ å…¸å‹ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ¯æ—¥ç›‘æ§
ç³»ç»Ÿä¼šåœ¨é…ç½®çš„æ—¶é—´è‡ªåŠ¨æ£€æŸ¥ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚

### åœºæ™¯2: æ–°å¢èµ„æºåæ£€æŸ¥
æ·»åŠ äº†æ–°çš„å½±è§†èµ„æºæ˜ å°„åï¼Œæ‰‹åŠ¨è§¦å‘æ£€æŸ¥ï¼š
```bash
curl -X POST http://localhost:8080/api/check-missing-links
```

### åœºæ™¯3: æ‰¹é‡è¡¥å…¨é“¾æ¥
1. æŸ¥è¯¢ç¼ºå¤±çš„é“¾æ¥
2. æ‰¹é‡ç”Ÿæˆç¼ºå¤±çš„é“¾æ¥
3. å†æ¬¡æ£€æŸ¥ç¡®è®¤

å®Œæ•´æµç¨‹ï¼š
```bash
# 1. æ£€æŸ¥ç¼ºå¤±
curl -X POST http://localhost:8080/api/check-missing-links

# 2. ç”Ÿæˆç™¾åº¦é“¾æ¥
curl -X POST http://localhost:8080/api/generate-link \
  -H "Content-Type: application/json" \
  -d '{"pan_type": "baidu"}'

# 3. ç”Ÿæˆå¤¸å…‹é“¾æ¥
curl -X POST http://localhost:8080/api/generate-link \
  -H "Content-Type: application/json" \
  -d '{"pan_type": "quark"}'

# 4. å†æ¬¡æ£€æŸ¥ç¡®è®¤
curl -X POST http://localhost:8080/api/check-missing-links
```

## âœ… æµ‹è¯•éªŒè¯

```bash
# 1. å¯åŠ¨æœåŠ¡
python -m backend.main

# 2. ç­‰å¾…çœ‹åˆ°å¯åŠ¨æ—¥å¿—
# âœ… åˆ†äº«é“¾æ¥æ£€æŸ¥å™¨å·²å¯åŠ¨ (é—´éš”: 24å°æ—¶)

# 3. æ‰‹åŠ¨è§¦å‘æµ‹è¯•
curl -X POST http://localhost:8080/api/check-missing-links

# 4. æŸ¥çœ‹å“åº”
# åº”è¯¥è¿”å›åŒ…å«ç»Ÿè®¡ä¿¡æ¯çš„JSON

# 5. æ£€æŸ¥ä¼ä¸šå¾®ä¿¡
# åº”è¯¥æ”¶åˆ°ä¸€æ¡æ£€æŸ¥æŠ¥å‘Šæ¶ˆæ¯
```

## ğŸ› æ•…éšœæ’é™¤

**é—®é¢˜1: æ£€æŸ¥å™¨æœªå¯åŠ¨**
- æ£€æŸ¥ config.yaml ä¸­ `share_link_checker.enabled` æ˜¯å¦ä¸º `true`
- é‡å¯æœåŠ¡

**é—®é¢˜2: APIè¿”å›503é”™è¯¯**
- è¯´æ˜æ£€æŸ¥å™¨æœªæˆåŠŸå¯åŠ¨
- æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

**é—®é¢˜3: æ”¶ä¸åˆ°å¾®ä¿¡é€šçŸ¥**
- æ£€æŸ¥ä¼ä¸šå¾®ä¿¡é…ç½®æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ config.yaml ä¸­ `wechat.default_user` æ˜¯å¦é…ç½®

## ğŸ‰ æ€»ç»“

ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„åˆ†äº«é“¾æ¥ç›‘æ§å·¥å…·ï¼Œå¯ä»¥ï¼š
- âœ… å®šæœŸè‡ªåŠ¨æ£€æŸ¥ç¼ºå¤±çš„åˆ†äº«é“¾æ¥
- âœ… é€šè¿‡ä¼ä¸šå¾®ä¿¡æ¥æ”¶æ£€æŸ¥æŠ¥å‘Š  
- âœ… éšæ—¶æ‰‹åŠ¨è§¦å‘æ£€æŸ¥
- âœ… æŒ‰ç½‘ç›˜ç±»å‹æŸ¥è¯¢ç¼ºå¤±åˆ—è¡¨
- âœ… ç»“åˆç°æœ‰APIæ‰¹é‡ç”Ÿæˆé“¾æ¥

ä¸ç”¨å†æ‰‹åŠ¨å»æŸ¥çœ‹å“ªäº›èµ„æºæ²¡æœ‰é“¾æ¥äº†ï¼ğŸŠ

